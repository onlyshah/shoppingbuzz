{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { first } from 'rxjs';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/common.service\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction ShopcartdetailsComponent_ul_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ul\", 16)(1, \"li\", 17)(2, \"div\", 18)(3, \"div\", 19);\n    i0.ɵɵelement(4, \"img\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 19)(6, \"a\", 21)(7, \"h6\", 22);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"span\")(10, \"small\", 23);\n    i0.ɵɵelement(11, \"i\", 15);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"div\", 24)(14, \"div\", 25)(15, \"div\", 25)(16, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function ShopcartdetailsComponent_ul_6_Template_button_click_16_listener() {\n      const ctx_r1 = i0.ɵɵrestoreView(_r1);\n      const data_r3 = ctx_r1.$implicit;\n      const i_r4 = ctx_r1.index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.quantity(\"max\", i_r4, data_r3.quantity, data_r3.productId._id));\n    });\n    i0.ɵɵelement(17, \"i\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 28);\n    i0.ɵɵelementStart(19, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function ShopcartdetailsComponent_ul_6_Template_button_click_19_listener() {\n      const ctx_r5 = i0.ɵɵrestoreView(_r1);\n      const data_r3 = ctx_r5.$implicit;\n      const i_r4 = ctx_r5.index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.quantity(\"min\", i_r4, data_r3.quantity, data_r3.productId._id));\n    });\n    i0.ɵɵelement(20, \"i\", 30);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(21, \"div\", 24)(22, \"div\", 31)(23, \"a\", 32);\n    i0.ɵɵlistener(\"click\", function ShopcartdetailsComponent_ul_6_Template_a_click_23_listener() {\n      const data_r3 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.deletecartItem(data_r3 == null ? null : data_r3.productId._id));\n    });\n    i0.ɵɵelementStart(24, \"span\", 33);\n    i0.ɵɵelement(25, \"i\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"span\", 35);\n    i0.ɵɵtext(27, \"Delete\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(28, \"div\", 36)(29, \"div\", 37)(30, \"a\", 32);\n    i0.ɵɵlistener(\"click\", function ShopcartdetailsComponent_ul_6_Template_a_click_30_listener() {\n      const data_r3 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.movetoWishList(data_r3 == null ? null : data_r3.productId._id));\n    });\n    i0.ɵɵelementStart(31, \"span\", 33);\n    i0.ɵɵelement(32, \"i\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"span\", 35);\n    i0.ɵɵtext(34, \"Save to List\");\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const data_r3 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r4.imagePath + (data_r3 == null ? null : data_r3.productId.productImage), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(data_r3 == null ? null : data_r3.productId.productname);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(data_r3 == null ? null : data_r3.productId.price);\n    i0.ɵɵadvance(6);\n    i0.ɵɵpropertyInterpolate(\"value\", data_r3.quantity);\n  }\n}\nfunction ShopcartdetailsComponent_ul_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 16)(1, \"li\", 39)(2, \"div\", 40)(3, \"div\");\n    i0.ɵɵtext(4, \"Item Subtotal\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵelement(6, \"i\", 15);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const data_r7 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", data_r7.quantity * data_r7.productId.price, \" \");\n  }\n}\nexport let ShopcartdetailsComponent = /*#__PURE__*/(() => {\n  class ShopcartdetailsComponent {\n    constructor(comApi, auth, route, router) {\n      this.comApi = comApi;\n      this.auth = auth;\n      this.route = route;\n      this.router = router;\n      this.data = [];\n      this.show = false;\n      this.imagePath = environment.baseUrl;\n      this.userId = this.auth.userValue.userId;\n      this.route.routeReuseStrategy.shouldReuseRoute = function () {\n        return false;\n      };\n      this.mySubscription = this.route.events.subscribe(event => {\n        if (event instanceof NavigationEnd) {\n          // Trick the Router into believing it's last link wasn't previously loaded\n          this.route.navigated = false;\n        }\n      });\n    }\n    ngOnInit() {\n      this.comApi.getproducttocart(this.userId).subscribe(response => {\n        this.data = response.products;\n        console.log('data', this.data);\n        this.updateprices = 0;\n        this.data.forEach(el => {\n          this.productquantity = el.quantity;\n          this.updateprices += el.quantity * el.productId.price;\n          //console.log(this.updateprices)\n        });\n      });\n    }\n    quantity(value, index, productId, proid) {\n      if (value == 'max') {\n        this.data[index].quantity = this.data[index].quantity + 1;\n        this.quantityplus = this.data[index].quantity;\n        console.log('id', proid, this.userId, this.data[index].quantity);\n        let data = {\n          \"userId\": this.userId,\n          \"products\": {\n            \"productId\": proid,\n            \"quantity\": this.quantityplus\n          }\n        };\n        this.comApi.onUpdatecart(data).subscribe(res => {\n          let data = res;\n          console.log('cart update', data);\n        });\n      } else if (value == 'min') {\n        this.data[index].quantity = this.data[index].quantity - 1;\n        this.quantityminus = this.data[index].quantity;\n        let data = {\n          \"userId\": this.userId,\n          \"products\": {\n            \"productId\": proid,\n            \"quantity\": this.quantityminus\n          }\n        };\n        this.comApi.onUpdatecart(data).subscribe(res => {\n          let data = res;\n          console.log('cart update', data);\n        });\n      }\n      this.doTotalPrice(index, value);\n    }\n    doTotalPrice(index, value) {\n      if (value == 'max') {\n        this.updateprices += this.data[index].productId.price;\n        console.log(this.data[index].quantity * this.data[index].productId.price);\n        this.upprice = this.updateprices;\n      } else if (value == 'min') {\n        this.updateprices -= this.data[index].productId.price;\n        console.log(this.data[index].quantity * this.data[index].productId.price);\n        this.downprice = this.updateprices;\n      }\n      this.onUpdadte(value);\n    }\n    onUpdadte(value) {}\n    // from  cart to wishlist\n    movetoWishList(productId) {\n      var value = {\n        \"userId\": this.userId,\n        \"List\": {\n          \"productId\": productId\n        }\n      };\n      // console.log(value)\n      this.comApi.addtowishlist(value).subscribe(res => {\n        let wishlist = res;\n        console.log('wishlist', wishlist);\n      });\n      this.deletecartItem(productId);\n    }\n    deletecartItem(productId) {\n      console.log('delete', productId, this.userId);\n      this.comApi.deletecartItem(this.userId, productId).pipe(first()).subscribe({\n        next: res => {\n          console.log('deleted', res);\n        }\n      });\n    }\n    static #_ = this.ɵfac = function ShopcartdetailsComponent_Factory(ɵt) {\n      return new (ɵt || ShopcartdetailsComponent)(i0.ɵɵdirectiveInject(i1.CommonService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ShopcartdetailsComponent,\n      selectors: [[\"app-shopcartdetails\"]],\n      decls: 20,\n      vars: 5,\n      consts: [[1, \"mb-lg-9\", \"mb-8\", \"mt-6\"], [1, \"container\"], [1, \"row\"], [1, \"col-lg-8\", \"col-md-7\"], [1, \"card\"], [1, \"card-body\"], [\"class\", \"list-group list-group-flush\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-4\", \"col-lg-4\", \"col-md-5\"], [1, \"mb-5\", \"card\"], [1, \"card-body\", \"p-6\"], [1, \"h5\", \"mb-4\"], [1, \"card\", \"mb-2\"], [1, \"d-grid\", \"mb-1\", \"mt-4\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", \"d-flex\", \"justify-content-between\", \"align-items-center\", 3, \"routerLink\"], [1, \"fw-bold\"], [1, \"bi\", \"bi-currency-rupee\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\", \"py-3\", \"py-lg-0\", \"px-0\", \"border-bottom\", \"mb-3\"], [1, \"row\", \"align-items-center\"], [1, \"col-3\", \"col-md-3\", \"col-sm-3\"], [\"alt\", \"Ecommerce\", 1, \"img-fluid\", \"icon-shape\", \"icon-xxl\", 3, \"src\"], [\"href\", \"shop-single.html\", 1, \"text-inherit\"], [1, \"mb-0\"], [1, \"text-muted\"], [1, \"col-2\", \"col-md-2\", \"col-sm-2\"], [1, \"input-group\", \"input-spinner\"], [\"type\", \"submit\", \"value\", \"-\", \"data-field\", \"quantity\", 1, \"button-minus\", \"btn\", \"btn-sm\", 3, \"click\"], [1, \"bi\", \"bi-plus-lg\"], [\"type\", \"number\", \"min\", \"1\", \"max\", \"10\", \"name\", \"quantity\", 1, \"quantity-field\", \"form-control-sm\", \"form-input\", 3, \"value\"], [\"type\", \"submit\", \"value\", \"+\", \"data-field\", \"quantity\", 1, \"button-plus\", \"btn\", \"btn-sm\", 3, \"click\"], [1, \"bi\", \"bi-dash-lg\"], [1, \"small\", \"lh-1\", \"mx-5\"], [1, \"text-decoration-none\", \"text-inherit\", 3, \"click\"], [1, \"align-text-bottom\"], [1, \"bi\", \"bi-trash\", \"fs-4\"], [1, \"text-muted\", \"d-none\"], [1, \"col-2\", \"col-md-2\"], [1, \"small\", \"lh-1\", \"mx-3\"], [1, \"bi\", \"bi-heart\", \"fs-4\"], [1, \"list-group-item\", \"d-flex\", \"justify-content-between\", \"align-items-start\"], [1, \"me-auto\"]],\n      template: function ShopcartdetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5);\n          i0.ɵɵtemplate(6, ShopcartdetailsComponent_ul_6_Template, 35, 4, \"ul\", 6);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 7)(8, \"div\", 8)(9, \"div\", 9)(10, \"h2\", 10);\n          i0.ɵɵtext(11, \"Summary\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 11);\n          i0.ɵɵtemplate(13, ShopcartdetailsComponent_ul_13_Template, 8, 1, \"ul\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 12)(15, \"button\", 13);\n          i0.ɵɵtext(16, \" Go to Checkout \");\n          i0.ɵɵelementStart(17, \"span\", 14);\n          i0.ɵɵelement(18, \"i\", 15);\n          i0.ɵɵtext(19);\n          i0.ɵɵelementEnd()()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngForOf\", ctx.data);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.data);\n          i0.ɵɵadvance(2);\n          i0.ɵɵpropertyInterpolate1(\"routerLink\", \"../checkout/\", ctx.userId, \"\");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate(ctx.updateprices);\n        }\n      },\n      dependencies: [i4.NgForOf, i3.RouterLink]\n    });\n  }\n  return ShopcartdetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}