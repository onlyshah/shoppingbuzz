// import { Injectable } from '@angular/core';

// @Injectable({
//   providedIn: 'root'
// })
// export class SessionService {
//   private sessionExpiry: number = 0; 
//   private sessionTimeout: any;

//   constructor() {
//     this.resetSession();  // Check if there's an existing session on service initialization
//   }

//   startSession(duration: number) {
//     this.sessionExpiry = Date.now() + duration;
//     this.sessionTimeout = setTimeout(() => this.endSession(), duration);
//     this.saveSession();  // Save the session expiry in session storage
//   }

//   resetSession() {
//     const storedExpiry = sessionStorage.getItem('userData');
//     console.log('storedExpiry', storedExpiry)
//     if (storedExpiry) {
//       this.sessionExpiry = parseInt(storedExpiry, 10);
//       if (this.sessionExpiry > Date.now()) {
//         const remainingTime = this.sessionExpiry - Date.now();
//         this.sessionTimeout = setTimeout(() => this.endSession(), remainingTime);
//       } else {
//         this.endSession();  // End session if expired
//       }
//     }
//   }

//   endSession() {
//     clearTimeout(this.sessionTimeout);
//     this.sessionExpiry = 0;
//    // sessionStorage.removeItem('userData');
//     sessionStorage.removeItem('userData');  // Clear user data as well
//     this.router.navigate(['/login']);
//   }

//   isSessionActive(): boolean {
//     return this.sessionExpiry > Date.now();
//   }

//   saveSession() {
//     // sessionStorage.setItem('userData', this.sessionExpiry.toString());
//     sessionStorage.getItem('userData');
//   }
// }